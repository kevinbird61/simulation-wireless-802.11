<!-- "doc" type, with tabs usage as template--><!-- Author: Kevin Cyu--><!-- include mixins--><!-- mixin - list--><!-- main--><!DOCTYPE html><html><!-- include header--><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Project 2</title><link rel="stylesheet" href="./asset/highlight.min.css"/><link rel="stylesheet" href="./asset/paper.min.css"/><link rel="stylesheet" href="./asset/monokai.css"/><link rel="stylesheet" href="./asset/main.css"/><link rel="stylesheet" href="./asset/cn-font.css"/><style>.tabs input[id=tab6]:checked~div[id=content6]{display:block}</style><style>.tabs input[id=tab7]:checked~div[id=content7]{display:block}</style><style>.tabs input[id=tab8]:checked~div[id=content8]{display:block}</style><style>.tabs input[id=tab9]:checked~div[id=content9]{display:block}</style><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script src="./asset/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="container"><div class="paper"><div class="demo-title" id="top"><div class="row flex-center"><div class="text-center"> <h1>Project 2</h1></div></div></div><div class="section"><div class="flex-spaces tabs">
<input id="tab1" type="radio" name="tabs" checked/>
<label for="tab1">01-Intro</label>

<input id="tab2" type="radio" name="tabs"/>
<label for="tab2">02-1-Radio</label>

<input id="tab3" type="radio" name="tabs"/>
<label for="tab3">02-2-Mobility</label>

<input id="tab4" type="radio" name="tabs"/>
<label for="tab4">02-3-PHY</label>

<input id="tab5" type="radio" name="tabs"/>
<label for="tab5">02-4-NET</label>

<input id="tab6" type="radio" name="tabs"/>
<label for="tab6">02-5-APP</label>

<input id="tab7" type="radio" name="tabs"/>
<label for="tab7">02-6-MAC</label>

<input id="tab8" type="radio" name="tabs"/>
<label for="tab8">02-source-code-tracing</label>

<input id="tab9" type="radio" name="tabs"/>
<label for="tab9">03-event</label>

<div class="content" id="content1"><p><h2>Introduction</h2>
<p>Project 2 is aim to anaylze the source code of 802.11 mechanism. Using MATLAB source code to illustrate how does it work.</p>
<p>Obviously, the work can be divided into several part:</p>
<ol>
<li>Power consumption (Radio Propagation, Mobility, PHY)
<ul>
<li>transmition rate</li>
<li>transmition power</li>
<li>distance</li>
</ul>
</li>
<li>Interference among nodes (NET, APP)
<ul>
<li>overlay</li>
</ul>
</li>
<li>Internal receiving mechanism in each node. (MAC)
<ul>
<li>contention window mechanism</li>
<li>re-transmit mechanism</li>
</ul>
</li>
</ol>
<h2>Note</h2>
<ul>
<li>This project is used for NCKU network simulation course, use for education only.</li>
<li>Written by <a href="https://github.com/kevinbird61"><code>Kevin Cyu</code></a>
<ul>
<li><code>Nuntanut Bhooanusas</code></li>
<li><code>JingZhao Zhuo</code></li>
</ul>
</li>
</ul>
</p></div><div class="content" id="content2"><p><h2>Radio Propagation</h2>
<p>Edit: <code>Kevin Cyu</code></p>
<hr>
<p>This part introduce <code>3 model</code> on power delivery:</p>
<ul>
<li>free space propagation</li>
<li>two-ray ground reflection model</li>
<li>lognormal shadowing model</li>
</ul>
<h3>Free Space</h3>
<ul>
<li>transmit/receive antenna <strong>without any influence of the earth surface</strong> , so called “free space”</li>
<li>Equation: <code>w = pT * Gt/ (4 * p * d^2).</code>, is the power which this transmitter can provide.
<ul>
<li>d: antenna coverage range</li>
<li>pT : power ( transmitter )</li>
<li>Gt : antenna gain</li>
<li>4 p d2 : coverage area size</li>
</ul>
</li>
<li>This equation represent an <code>sphere</code>, where transmitter is in the <code>center</code>, and the <code>radius</code> is <code>d</code>
<ul>
<li><code>4 p d^2</code> is the area which the power delivery by transmitter can reach.</li>
</ul>
</li>
</ul>
<h4>Path Loss Theorem</h4>
<ul>
<li>When distance of propagation increase, the radiated <code>energy</code> will decrease, so called <code>path loss</code>
<ul>
<li>power and <code>d^2</code> is inversely(成反比).</li>
</ul>
</li>
</ul>
<pre><code>P' = P - 20*log(d'/d)
</code></pre>
<h3>Two-ray ground reflection model</h3>
<ul>
<li>A more realistic model compare to <code>free space</code></li>
<li>Not only calculate the transmission of node to node, also consider the <code>reflection</code> of from the earth.</li>
<li>In this model, the result in <code>short-distance</code> is worse because the <strong>oscillation combination from constructive and destructive ray</strong>.</li>
</ul>
<h3>Lognormal shadowing model</h3>
<ul>
<li>The above 2 model are all in the ideal case in <code>cycle</code>.</li>
<li>Practically, received power will be an <code>random variable</code> which based on <code>multi-path propagation</code> in the specific distance, a.k.a <code>fading effects</code>
<ul>
<li>Need to consider: <code>path loss model</code>, <code>variation of received power(in specific distance)</code></li>
</ul>
</li>
<li><code>shadowing model</code> extends the ideal circle model to a sophisticated model, a more realistic model.</li>
</ul>
</p></div><div class="content" id="content3"><p><h2>Mobility</h2>
<p>Edit: <code>Kevin Cyu</code></p>
<hr>
<h3>Random waypoint model</h3>
<p>Random model for the movement of mobile users, and how their <code>location</code>, <code>velocity</code> and <code>acceleration</code> <strong>change</strong> over time.</p>
<p>So this part is going to simulate the status of movement of the mobile user randomly!</p>
<ul>
<li>Why this model is most popular <code>mobility model</code> for <strong>mobile ad-hoc network(MANET)</strong> routing protocol?
<ul>
<li>simplicity</li>
<li>wide availability</li>
</ul>
</li>
</ul>
<p>=&gt;
each <code>mobile node</code> in this random mobility simulation model is <code>independent</code>, and all using a <code>random</code> way to move (without any constraint); Also, its <code>destination</code>, <code>speed</code>, <code>direction</code> all using choose randomly.</p>
<p>=&gt;
In each simulation routine (i.e. tick), will let each node choose randomly on <code>destination</code>, <code>speed</code> again, until simulation clock end.</p>
<ul>
<li>Have two variation:
<ul>
<li>random walk model</li>
<li>random direction model</li>
</ul>
</li>
</ul>
</p></div><div class="content" id="content4"><p><h2>Physical Layer</h2>
<p>Edit: <code>Nuntanut Bhooanusas(Chuanjie Fu)</code></p>
<hr>
<p>There are <code>2 parts</code> in this section:</p>
<ul>
<li>SNR-based packet capture</li>
<li>Broadcast &amp; Dynamic transmission rate and power</li>
</ul>
<h3>SNR-based packet capture</h3>
<p>Signal-to noise ratio(SNR), in decibels , is a measurement between receive signals and noise signals.  For wireless communication, it can be computed by Equation N.1 to N.3. The example of SNR is given in Picture N.1</p>
<p><img src="./res/E1.jpg" alt="Equation N1"></p>
<ul>
<li>Equation N.1.</li>
</ul>
<p><img src="./res/E2.png" alt="Equation N2"></p>
<ul>
<li>Equation N.2.</li>
</ul>
<p><img src="./res/E3.png" alt="Equation N3"></p>
<ul>
<li>Equation N.3.</li>
</ul>
<p>This ratio is unreliable if it falls into 10-15 db and its poor rate is from 16 db to 24 db, whereas the rate of 24-40 db and exceeding 41 db is good and excellent respectively.</p>
<p><img src="./res/N1.png" alt="Picture N1"></p>
<ul>
<li>Picture N.1.</li>
</ul>
<p>The SNR is vital for IEEE 802.11 since if it is very low, the packet might need a re-transmission several times. Whether or not delivering a packet from source to destination will be successful is depended on transmission rate and power adjustment. The next section explains towards this adjustment.</p>
<h3>Broadcast &amp; Dynamic transmission rate and power</h3>
<p>Another thing , a transmission power , is to save energy of devices and battery life. It also affect the transmission rate. For example, when the distance of piers is small, <code>the power level will be reduced and the data rate will increase to the highest possibility such that the packet can reach the destination</code>.</p>
<p>Both the transmission power and the transmission rate is necessary for a service requirement since they can be related to packet errors during broadcasting. The further information is provided in [1].</p>
<p>[1] http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.404.5870&amp;rep=rep1&amp;type=pdf</p>
</p></div><div class="content" id="content5"><p><h2>Network Routing Protocol</h2>
</p></div><div class="content" id="content6"><p><h2>Overlay</h2>
</p></div><div class="content" id="content7"><p><h2>MAC Layer</h2>
<p>Edit: <code>Nuntanut Bhooanusas(Chuanjie Fu)</code></p>
<hr>
<p>There are <code>2 parts</code> in this section:</p>
<ul>
<li>CSMA/CA( Carrier Sense Multiple Access with Collision Avoidance)</li>
<li>Virtual Carrier Sense and RTS-CTS-DATA-ACK</li>
</ul>
<h3>CSMA/CA( Carrier Sense Multiple Access with Collision Avoidance)</h3>
<p>CSMA is a protocol for carrier transmission in IEEE 802.11 network to protect a packet collision by listen-before-talk; this approach is nowadays applied to distributed coordination function(DCF).</p>
<p>In DCF, there are two time periods. The first one, DCF Inter-Frame Space(DIFS), is to tell a senders whether or not the medium is idle before starting sending a packet. Another one , Short Inter-Frame Space(SIFS), is a period that the medium can send the acknowledgement and will take place after the end of DIFS. The basic example is shown in Figure N.1</p>
<p><img src="./res/F1.png" alt="Figure N1"></p>
<ul>
<li>Figure N.1 Basic method of DCF.</li>
</ul>
<p>However, the method above can bring about collisions in the case that there are two or more stations sense the medium idle and try to transmit at the same time. In order to prevent this situation, the station should postpone access until the medium becomes idles and select a random backoff value. How to medium protect collisions and choose this value is fully explained in course material(Please see in the NCKU moodle)</p>
<h3>Virtual Carrier Sense and RTS-CTS-DATA-ACK</h3>
<p>RTS/CTS is defined to solve the hidden terminal problem found in wireless that use CSMA.  Importantly, the sender and receiver perform a handshake mechanism by exchanging RTS(Request to send) and CTS(Clear to send) control frame.</p>
<p>This approach will begin after waiting the DIFs time; then the sender send RTS to receiver prior to transmission of data frame. After awaiting SIFs, the receiver will respond with CTS including the successful handshake frame to make sure that the medium is reserved for transmission.</p>
<p>Moreover, RTS/CTS employs Virtual Carrier Sensing so as to inform other stations that there is packet broadcasting in the network by RTS and CTS frames including  the duration when the sender and the receiver complete the transmission.  As a result, all stations around this area will then set their NAV(Network Allocation Vector) after obtaining these frame so that they can know the period that they need to wait for the completion of the transmission.</p>
<p>The RTS/CTS mechanism is provided in Figure N.2.</p>
<p><img src="./res/F2.png" alt="Figure N2"></p>
<ul>
<li>Figure N.2 RTS/CTS Mechanism.</li>
</ul>
</p></div><div class="content" id="content8"><p><h2>Tracing the code</h2>
<h3>Workflow - sim1.m</h3>
<p>We'll have a closely look on the main program flow here, and then move to event part to have advanced appearence.</p>
<p><img src="./res/sim1.png" alt=""></p>
<ul>
<li>Result - <code>Hop Count</code></li>
</ul>
<p><img src="./res/sim1_hop_count.png" alt=""></p>
<ul>
<li>Result - <code>Response Time</code></li>
</ul>
<p><img src="./res/sim1_response_time.png" alt=""></p>
<ul>
<li>Result - <code>Success Rate</code></li>
</ul>
<p><img src="./res/sim1_success_rate.png" alt=""></p>
<h3>Workflow - sim2.m</h3>
</p></div><div class="content" id="content9"><p><h2>Event</h2>
<p>Listing all event types in simulation.</p>
<h3>Sim1</h3>
<ul>
<li>send_phy</li>
</ul>
<p>When current event's node is idle &amp; <code>nav</code> is not busy -&gt; will using this node as <code>transmitter</code></p>
<p>And then set up the other nodes as <code>receiver</code>: (2 mode)</p>
<ol>
<li><strong>broadcast</strong>
<ul>
<li>broadcast from this transmitter</li>
<li>impact all idle node (using <code>overlay</code> meachanism to identify), and those nodes will schedule a <code>recv_phy</code> event for each one of them.</li>
</ul>
</li>
<li><strong>unicast</strong>
<ul>
<li>This part will illustrate <code>unicast</code> from <em>event.node</em> to <em>event.pkt.rv</em></li>
<li>First set <code>event.pkt.rv</code> to receiver mode</li>
<li>Then set number of <code>n</code> nodes into <code>receiver mode</code></li>
</ul>
</li>
</ol>
<p>After all setting above, setup the transmitter's finish event: <code>send_phy_finish</code> ( in <code>t+txtime+eps</code> later, which <code>t+txtime</code> is <code>recv_phy</code> event )</p>
<p>Check <code>event.pkt.type</code>:</p>
<ul>
<li>= <code>rts</code>:
<ul>
<li>set timeout timer for RTS</li>
<li>schedule event <code>timeout_rts</code> after <code>t + (txtime + SIFS + cts_tx_time)*2</code></li>
<li>And record this node as pending id (waiting mode)</li>
</ul>
</li>
<li>= <code>data</code> &amp; (<code>event.pkt.rv</code> != 0):
<ul>
<li>set timeout for DATA</li>
<li>schedule event <code>timeout_data</code> after <code>t + (txtime + SIFS + ack_tx_time)*2</code></li>
</ul>
</li>
</ul>
<p>Node not <code>idle</code> or <code>nav</code> is block</p>
<ul>
<li>-&gt; schedule <code>wait_for_channel</code> after <code>t + cca_time</code></li>
<li>push it into <em>waiting queue</em></li>
</ul>
<p><img src="./res/sim1-send_phy.png" alt=""></p>
<ul>
<li>send_phy_finish</li>
</ul>
<p><img src="./res/sim1-send_phy_finish.png" alt=""></p>
<ul>
<li>send_mac</li>
</ul>
<p><img src="./res/sim1-send_mac.png" alt=""></p>
<ul>
<li>recv_mac</li>
</ul>
<p><img src="./res/sim1-recv_mac.png" alt=""></p>
<ul>
<li>recv_phy</li>
</ul>
<p><img src="./res/sim1-recv_phy.png" alt=""></p>
<ul>
<li>wait_for_channel</li>
</ul>
<p><img src="./res/sim1-wait.png" alt=""></p>
<ul>
<li>backoff</li>
</ul>
<p><img src="./res/sim1-bo.png" alt=""></p>
<ul>
<li>backoff_start</li>
</ul>
<p><img src="./res/sim1-bos.png" alt=""></p>
<ul>
<li>timeout_rts</li>
</ul>
<p><img src="./res/sim1-timeout-rts.png" alt=""></p>
<ul>
<li>timeout_data</li>
</ul>
<p><img src="./res/sim1-timeout-data.png" alt=""></p>
<ul>
<li>timeout_rreq</li>
</ul>
<p><img src="./res/sim1-timeout-rreq.png" alt=""></p>
<ul>
<li>send_net</li>
</ul>
<p><img src="./res/sim1-send_net.png" alt=""></p>
<ul>
<li>send_net2</li>
</ul>
<p><img src="./res/sim1-send_net2.png" alt=""></p>
<ul>
<li>recv_net</li>
</ul>
<p><img src="./res/sim1-recv_net.png" alt=""></p>
<ul>
<li>send_app</li>
</ul>
<p><img src="./res/sim1-send_app.png" alt=""></p>
<ul>
<li>recv_app</li>
</ul>
<p><img src="./res/sim1-recv_app.png" alt=""></p>
</p></div></div></div><div class="row flex-right"><p>Created by <span class="badge secondary">@ToolBuddy/@papercss</span></p></div></div></div></body></html>